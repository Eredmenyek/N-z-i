<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>Cadillac F1 Team – 2025 Eredmények</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: Arial, sans-serif;
      background: url("https://imgs.search.brave.com/QkFGfHtPGGiEc9XliQFZt3vDR9Bla_TaRPmgLWfDPZU/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9jYWRp/bGxhY3NvY2lldHku/Y29tL3dwLWNvbnRl/bnQvdXBsb2Fkcy8y/MDI0LzA1L0dNLUNh/ZGlsbGFjLUYxLUZv/cm11bGEtT25lLXJh/Y2UtY2FyLWNsb3Nl/LXVwLXBvd2VyLXVu/aXQtbWFudWZhY3R1/cmVyLTAwMS0xMDI0/eDY4My5qcGc") no-repeat center center fixed;
      background-size: cover;
      color: #fff;
    }

   .container {
  background: transparent;
  padding: 20px;
  max-width: 1200px;
  width: 95%;
  margin: 50px auto;
  text-align: center;
}

    h1 {
      margin-bottom: 20px;
    }

    .nav {
      margin-bottom: 20px;
    }

    .nav button {
      margin: 0 10px;
      padding: 8px 16px;
      font-weight: bold;
      border: none;
      border-radius: 6px;
      background-color: #333;
      color: #fff;
      cursor: pointer;
      transition: background 0.3s;
    }

    .nav button:hover {
      background-color: #555;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background-color: rgba(230, 230, 230, 0.95);
      color: black;
      border-radius: 8px;
      overflow: hidden;
    }

    th, td {
      border: 1px solid #aaa;
      padding: 8px;
      text-align: center;
      user-select: text;
    }

    th {
      background-color: #222;
      color: #fff;
    }

    td[contenteditable="true"] {
      background-color: #f9f9f9;
      cursor: text;
    }

    td.disabled {
      background-color: black;
      color: #454343;
      cursor: default;
    }

    .gold {
      background-color: gold !important;
      color: black !important;
      font-weight: bold;
    }

    .silver {
      background-color: silver !important;
      color: black !important;
      font-weight: bold;
    }

    .bronze {
      background-color: #cd7f32 !important;
      color: black !important;
      font-weight: bold;
    }

    .dnf {
      background-color: #c00 !important;
      color: white !important;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 id="title">Cadillac F1 Team – 1. Szezon</h1>
    <div class="nav">
      <button onclick="switchSeason(1)">1. Szezon</button>
      <button onclick="switchSeason(2)">2. Szezon</button>
    </div>
    <table id="results-table">
      <thead>
        <tr>
          <th>#</th>
          <th>Nagydíj</th>
          <th>Helyszín</th>
          <th>Sprint</th>
          <th>Sprint időmérő</th>
          <th>Kvalifikáció</th>
          <th>Verseny</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBtWYLAHfvJvkFKHb9JvErm-2G5Mei_l64",
      authDomain: "eredmenyek-5ebb7.firebaseapp.com",
      projectId: "eredmenyek-5ebb7"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const races = [
      ["Ausztrál", "Melbourne", false],
      ["Kínai", "Sanghaj", true],
      ["Japán", "Szuzuka", false],
      ["Bahreini", "Szahír", false],
      ["Szaúd-arábiai", "Dzsidda", false],
      ["Miami", "Miami", true],
      ["Emilia-Romagna", "Imola", false],
      ["Monacói", "Monaco", false],
      ["Spanyol", "Barcelona", false],
      ["Kanadai", "Montreal", false],
      ["Osztrák", "Spielberg", false],
      ["Brit", "Silverstone", false],
      ["Belga", "Spa-Francorchamps", true],
      ["Magyar", "Mogyoród", false],
      ["Holland", "Zandvoort", false],
      ["Olasz", "Monza", false],
      ["Azerbajdzsáni", "Baku", false],
      ["Szingapúri", "Szingapúr", false],
      ["USA", "Austin", true],
      ["Mexikói", "Mexikóváros", false],
      ["São Paulo-i", "São Paulo", true],
      ["Las Vegas-i", "Las Vegas", false],
      ["Qatar-i", "Lasoil", false],
      ["Abu Dzabi", "Abu Dzabi", false]
    ];

    let currentSeason = 1;
    let unsubscribeFns = [];

    function switchSeason(season) {
      currentSeason = season;
      document.getElementById("title").innerText = `Cadillac F1 Team – ${season}. Szezon`;
      unsubscribeFns.forEach(unsub => unsub());
      unsubscribeFns = [];
      buildTable();
    }

    function applyStyle(cell) {
      const value = cell.innerText.trim().toUpperCase();
      cell.classList.remove("gold", "silver", "bronze", "dnf");
      if (value === "1") cell.classList.add("gold");
      else if (value === "2") cell.classList.add("silver");
      else if (value === "3") cell.classList.add("bronze");
      else if (value === "DNF") cell.classList.add("dnf");
    }

    function buildTable() {
      const tableBody = document.querySelector("#results-table tbody");
      tableBody.innerHTML = "";
      const collection = currentSeason === 1 ? "results" : "results_s2";

      races.forEach((race, index) => {
        const [name, location, hasSprint] = race;
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${index + 1}</td>
          <td>${name}</td>
          <td>${location}</td>
          <td id="cell-${index}-sprint" class="${!hasSprint ? 'disabled' : ''}"></td>
          <td id="cell-${index}-sprintqual" class="${!hasSprint ? 'disabled' : ''}"></td>
          <td id="cell-${index}-qual"></td>
          <td id="cell-${index}-race"></td>
        `;
        tableBody.appendChild(tr);

        ["sprint", "sprintqual", "qual", "race"].forEach(type => {
          const cellId = `cell-${index}-${type}`;
          const cell = document.getElementById(cellId);
          if (!cell || cell.classList.contains("disabled")) return;

          const unsub = db.collection(collection).doc(cellId).onSnapshot(doc => {
            if (doc.exists) {
              const value = doc.data().value || "";
              cell.innerText = value;
              applyStyle(cell);
            }
          });
          unsubscribeFns.push(unsub);
        });
      });
    }

    switchSeason(1);
  </script>
</body>
</html>
